<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/mercado_ver.css">
    <title>Mercado DaRoça</title>

    <script>
        //produtos de Frutas
        function Frutas(adicionar_ao_carrinho){
            let produtos = [{nome: "Maças(unidade)", valor: "0,99", imagem: "Maçãs.png", id: "Macas"},
                        {nome: "Laranjas(unidade)", valor: "0,99", imagem: "Laranjas.png", id: "Laranjas"},
                        {nome: "Peras(unidade)", valor: "0,99", imagem: "Peras.png", id: "Peras"},
                        {nome: "Mamões(unidade)", valor: "4,99", imagem: "Mamões.png", id: "Mamoes"},
                        {nome: "Maracujás(unidade)", valor: "1,99", imagem: "Maracujas.png", id:"Maracujas"}]
            colocar_produtos(produtos)
            colocar_botao_carrinho()
        }

        //produtos de Vegetais
        function Vegetais(adicionar_ao_carrinho){
            let produtos = [{nome: "Brócolis (quantidade em kilogramas)", valor: "5,99", imagem: "brocolis.png", id: "Brocolis"},
                        {nome: "Alho (quantidade em kilogramas)", valor: "32,99", imagem: "alho.png", id: "Alho"},
                        {nome: "Cebola (quantidade em kilogramas)", valor: "R$6,59", imagem: "cebola.png", id: "Cebola"},
                        {nome: "Cenoura (quantidade em kilogramas)", valor: "5,99", imagem: "cenoura.png", id: "Cenoura"},
                        {nome: "Pimentão (quantidade em kilogramas)", valor: "24,99", imagem: "pimentao.png", id:"Pimentao"}]
            colocar_produtos(produtos)
            colocar_botao_carrinho()
        }

        //produtos de Frios
        function Frios(adicionar_ao_carrinho){
            let produtos = [{nome: "Salsicha (quantidade em kilogramas)", valor: "32,99", imagem: "salsicha.png", id: "Salsicha"},
                        {nome: "Salame (quantidade em kilogramas)", valor: "90,99", imagem: "salame.png", id: "Salame"},
                        {nome: "Presunto (quantidade em kilogramas)", valor: "90,99", imagem: "presunto.png", id: "Presunto"},
                        {nome: "Queijo (quantidade em kilogramas)", valor: "95,99", imagem: "queijo.png", id: "Queijo"},
                        {nome: "Mortadela (quantidade em kilogramas)", valor: "92,99", imagem: "mortadela.png", id:"mortadela"}]
            colocar_produtos(produtos)
            colocar_botao_carrinho()
        }

        //produtos de Bebidas
        function Bebidas(adicionar_ao_carrinho){
            let produtos = [{nome: "Suco De Laranja (unidade de 500Ml)", valor: "5,99", imagem: "sucodelaranja.png", id: "SucoDeLaranja"},
                        {nome: "Leite (unidade de 1L)", valor: "4,99", imagem: "leite.png", id: "Leite"},
                        {nome: "Guarana (unidade de 2L)", valor: "8,99", imagem: "guarana.png", id: "Guarana"},
                        {nome: "Fanta (unidade de 2L)", valor: "7,99", imagem: "fanta.png", id: "Fanta"},
                        {nome: "Coca Cola (unidade de 2L)", valor: "10,99", imagem: "cocacola.png", id:"CocaCola"}]
            colocar_produtos(produtos)
            colocar_botao_carrinho()
        }

        //produtos de Alimentos
        function Alimentos(adicionar_ao_carrinho){
            let produtos = [{nome: "Arroz (por quilo)", valor: "5,99", imagem: "arroz.png", id: "Arroz"},
                        {nome: "Azeite De Oliva (garrafa 500ml)", valor: "39,99", imagem: "azeitedeioliva.png", id: "AzeiteDeOliva"},
                        {nome: "Feijão (por quilo)", valor: "8,99", imagem: "feijão.png", id: "Feijao"},
                        {nome: "Macarrão (meio quilo)", valor: "4,99", imagem: "macarrão.png", id: "Macarrao"},
                        {nome: "Tilápia (por quilo)", valor: "12,00", imagem: "peixe.png", id:"Tilapia"}]
            colocar_produtos(produtos)
            colocar_botao_carrinho()
        }

        function colocar_produtos(produtos){
            document.querySelector('#Selecionar_Produtos').innerHTML = ""
            for(let indice = 0; indice < produtos.length; indice++){
                //cria as divs
                let div1 = document.createElement('div')
                div1.setAttribute("class", "Produto",)
                div1.setAttribute("id", produtos[indice].id)
                document.querySelector('#Selecionar_Produtos').appendChild(div1)

                //adcionar informações
                //nome
                let nome = document.createElement('p')
                let node = document.createTextNode(produtos[indice].nome)
                nome.appendChild(node)
                document.getElementById(produtos[indice].id).appendChild(nome)

                //preço
                let preco = document.createElement('p')
                node = document.createTextNode('R$' + produtos[indice].valor)
                preco.appendChild(node)
                document.getElementById(produtos[indice].id).appendChild(preco)

                //imagem
                let imagem = document.createElement('img')
                imagem.setAttribute("src", "Imagens/Produtos/" + produtos[indice].imagem)
                document.getElementById(produtos[indice].id).appendChild(imagem)

                //botões
                let a = document.querySelector('.Selecionar_Produtos')
                let div_Botoes = document.createElement('div')
                div_Botoes.setAttribute('class', "Adicionar_Retirar")
                document.getElementById(produtos[indice].id).appendChild(div_Botoes)
                let botao_adicionar = document.createElement('button')
                botao_adicionar.setAttribute('class', "Adicionar")
                botao_adicionar.setAttribute('onclick', 'adicionar('+produtos[indice].id+')')
                let botao_retirar = document.createElement('button')
                botao_retirar.setAttribute('class', 'Retirar')
                botao_retirar.setAttribute('onclick', 'retirar('+produtos[indice].id+')')
                let quant = document.createElement('p')
                quant.innerHTML = "0"
                botao_adicionar.innerHTML = "+"
                botao_retirar.innerHTML = "-"
                document.getElementById(produtos[indice].id).querySelector('.Adicionar_Retirar').appendChild(botao_retirar)
                document.getElementById(produtos[indice].id).querySelector('.Adicionar_Retirar').appendChild(quant)
                document.getElementById(produtos[indice].id).querySelector('.Adicionar_Retirar').appendChild(botao_adicionar)
                window.location.href = "#Selecionar_Produtos"
            }
        }

        function adicionar(produto){
            let quantidade = produto.querySelector(".Adicionar_Retirar").querySelector('p').innerHTML
            let aumentar_quantidade = Number(quantidade) + 1
            produto.querySelector(".Adicionar_Retirar").querySelector('p').innerHTML = aumentar_quantidade
        }

        function retirar(produto){
            let quantidade = produto.querySelector(".Adicionar_Retirar").querySelector('p').innerHTML
            if (Number(quantidade) != 0){
                let aumentar_quantidade = Number(quantidade) - 1
                produto.querySelector(".Adicionar_Retirar").querySelector('p').innerHTML = aumentar_quantidade
            }
        }

        function colocar_botao_carrinho(){
            try{
            document.querySelector('#adicionar_ao_carrinho').remove()
            let botao_carrinho = document.createElement('button')
            botao_carrinho.setAttribute('id', 'adicionar_ao_carrinho')
            botao_carrinho.setAttribute('onclick', 'adicionar_ao_carrinho()')
            botao_carrinho.innerHTML='Adicionar ao carrinho'
            document.querySelector('#botao_carrinho').appendChild(botao_carrinho)
            }

            catch{
            let botao_carrinho = document.createElement('button')
            botao_carrinho.setAttribute('id', 'adicionar_ao_carrinho')
            botao_carrinho.setAttribute('onclick', 'adicionar_ao_carrinho()')
            botao_carrinho.innerHTML='Adicionar ao carrinho'
            document.querySelector('#botao_carrinho').appendChild(botao_carrinho)
            }
        }

        function adicionar_ao_carrinho(){
            for (let quant of document.querySelectorAll(".Adicionar_Retirar")){
                quant.querySelector("p").innerHTML= "0"
            }
            alert("Conecte-se Primeiro")
        }

        function mudar_BG(nome){
            for (let i of document.querySelectorAll(".Opcoes")){
                if (i.querySelector("p").innerHTML == nome){
                    i.style.backgroundColor = "#329e17"
                }

                else{
                    i.style.backgroundColor = ""
                }
            }
        }

        function identificar_selecionado(tipo){
            if (tipo == "frutas"){
                Frutas()
                mudar_BG("Frutas")
            }
            else if (tipo == "vegetais"){
                Vegetais()
                mudar_BG("Vegetais")
            }
            else if (tipo == "frios"){
                Frios()
                mudar_BG("Frios")
            }
            else if (tipo == "bebidas"){
                Bebidas()
                mudar_BG("Bebidas")
            }
            else if (tipo == "alimentos"){
                Alimentos()
                mudar_BG("Alimentos")
            }
        }

        function Retornar() {
            location.href = "DaRoca.html"
        }
    </script>
</head>
<body>
    
    <header>
        <div>
            <button id="retornar_menuprincipal" onclick="Retornar()">voltar</button>
        </div>

        <div id="logo_menu">
            <img src="Imagens/Logo_DaRoca.jpg" id="logo">
            <h1>DaRoça</h1>
        </div>
    </header>

    <div id="Bem-Vindo">
        <h2>Bem-Vindo ao mercado DaRoça</h2>
    </div>

    <div id="Selecionar">
        <h3>Selecione o tipo de Mercadoria que deseja procurar</h3>
        <div id="Selecionar_Tipo">
            <div onclick="identificar_selecionado('frutas')" class="Opcoes">
                <p>Frutas</p>
            </div>
            
            <div onclick="identificar_selecionado('vegetais')" class="Opcoes">
                <p>Vegetais</p>
            </div>

            <div onclick="identificar_selecionado('frios')" class="Opcoes">
                <p>Frios</p>
            </div>

            <div onclick="identificar_selecionado('bebidas')" class="Opcoes">
                <p>Bebidas</p>
            </div>

            <div onclick="identificar_selecionado('alimentos')" class="Opcoes">
                <p>Alimentos</p>
            </div>
        </div>
    </div>

    <div id="Selecionar_Produtos">

    </div>
    <div id="botao_carrinho">

    </div>

</body>
</html>